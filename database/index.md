# 인덱스

# 1. 페이징 성능 개선 - No Offset (더보기, 숫자 없는 페이징)

# 2. 페이징 성능 개선 - 커버링 인덱스

```sql
-- 다음의 쿼리를

SELECT *
FROM items
WHERE 조건문
ORDER BY id DESC
OFFSET 페이지번호
LIMIT 페이지사이즈

-- 아래와 같이 개선 (서브 쿼리에서 커버링 인덱스 사용)

SELECT  *
FROM  items as i
JOIN (SELECT id
        FROM items
        WHERE 조건문
        ORDER BY id DESC
        OFFSET 페이지번호
        LIMIT 페이지사이즈) as temp on temp.id = i.id
```

일반적으로 사용하는 첫번째 쿼리는 인덱스를 타더라도 

- 메모리의 데이터 단위 - 페이지 (16KB)
- 디스크의 데이터 단위 - 블록 (4~16KB)

# 3-1. 페이징 성능 개선 - 페이지 건수 고정 (페이지 지연 로딩)

특정 상수로 고정된 페이지 수를 제공하다가 페이지 버튼을 눌렀을때 실제 데이터 수가 페이지의 양보다 적으면 그때 페이지 로딩 혹은 페이지 버튼을 누르면 그때 페이지 지연로딩하는 방법

실제로 페이지 버튼을 클릭하는 경우는 20% 이하이기 때문에 UX/UI 적으로 문제가 되지 않으면 사용할 수 있음

# 3-2. 페이징 성능 개선 - 첫 페이지 조회 결과 cache

첫 검색에서 조회된 count 결과를 응답으로 내려주고 매 페이징 버튼마다 처음에 조회한 count 결과를 함께 내려준다. (프론트 영역에서 요청시에 전체 count를 함께 보내주는 구조)

- 단점
    - 첫 페이지 조회가 대부분인 경우 개선되는 것이 없다
    - 실시간으로 데이터 수정이 필요해 버튼 반영이 필요한 경우 사용이 불가능하다

---
- https://jojoldu.tistory.com/529?category=637935
